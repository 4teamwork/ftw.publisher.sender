Changelog
=========


2.7.4 (2017-04-27)
------------------

- No longer move simplelayout blocks instantly. [jone]


2.7.3 (2017-03-20)
------------------

- Fix a bug where an old version was published. [jone]

- Close connection after publishing. [jone]


2.7.2 (2016-09-06)
------------------

- Make moving to worker queue more robust. [jone]


2.7.1 (2016-08-30)
------------------

- Fix edge-case, if the published object is removed before the async worker collects the data from the object.
  [mathias.leimgruber]


2.7.0 (2016-08-16)
------------------

- Add IPreventPublishing marker interface. [jone]

- Fix removeJob method, which always tried to remove the job from the worker queue.
  [mathias.leimgruber]


2.6.0 (2016-07-29)
------------------


- Add second worker queue, which is used by the worker to perform the actual
  job. Also remove the batch feature, was disabled for ages.
  [mathias.leimgruber]

- Do not add delete jobs to the task queue. It's quite certain that object will no longer exists if the
  extractor tries to get some data of the delete obj.
  [mathias.leimgruber]


2.5.0 (2016-07-27)
------------------

- Deferred extraction using collective.taskqueue. [jone]

- Migrate queue storage to zc.queue. [jone]

- Speedup enqueuing by logging less. [jone]

- Support dexterity relations. [mbaechtold]

- Add context manager for disabling job creation. [jone]


2.4.0 (2016-05-20)
------------------

- Workflow context state: skip parents without workflow when looking for
  parent state.
  This adds support for nested containers without workflows. [jone]


2.3.1 (2015-12-23)
------------------

- Use base class WorkflowConfigTest for TestWorkflowConfig test.
  If we don't, we'll get builder registrations conflict errors after
  importing the test class into another project. There are also problems
  while imoprting the test class directly on a project without ftw.simplelayout
  but ftw.contentpage.
  [elioschmutz]

- Blocks of ftw.contentpage will no longer published directly
  after deleting.
  Backport for ftw.contentpage of functionality provided for ftw.simplelayout:
  https://github.com/4teamwork/ftw.publisher.sender/pull/20
  [elioschmutz]


2.3.0 (2015-09-30)
------------------

- Drop Plone 4.2 support.
  [jone]

- Add ftw.simplelayout support.
  [jone]


2.2.2 (2015-03-19)
------------------

- Sort data collectors so that we have an expected order.
  This allows to affect the order with data collector names.
  [jone]


2.2.1 (2014-12-31)
------------------

- Get unpublished and published references in a save way - the may be removed.
  [mathias.leimgruber]


2.2.0 (2013-09-02)
------------------

- Add simplelayout support: publish blocks within simplelayout containers
  automatically when they have no workflow.
  [jone]

- Provide workflow integration with an example publisher workflow.
  [jone]

- Use publisher permission for protecting publisher control panel action.
  Required permission: "ftw.publisher.sender: Change Publisher Configuration"
  [jone]


2.1.0 (2013-06-13)
------------------

- Add separate permission for accessing the publisher settings in the
  control panel.
  By default, the permission is granted to Manager and Site Administrator.
  The permission is "ftw.publisher.sender: Change Publisher Configuration"
  [jone]


2.0.1 (2013-05-24)
------------------

- Execute queue view: add batch size argument.
  [jone]


2.0 (2013-05-24)
----------------

- Make status messages transaction aware, so that it works with integrity check rollbacks.
  [jone]

- Implement an ``override-realm`` ZCML directive for overriding database settings with ZCML.
  [jone]

- Make ugprade step 1.1 -> 1.2 save: do not migrate when there is no data.
  [jone]

- Plone 4.3 compatibility.
  [jone]

- Add "disable-publisher-for-testing" environment variable for disabling event handler.
  [jone]

- Fixed error if data-adapter (JSON-data) doesnt contain field_data_adapter.
  [jinfanger]

- UnicodeError in log. LogStream should not be mixed utf8 and unicode.
  [jinfanger]

- Ignored fields can be configurated, which will be ignored by the publisher.
  [jinfanger]

- Drop Plone 3 support.
  [jone]


1.5 (2011-07-05)
----------------

- Fixed authentication problem (base64) (issue #1)
  [jone]

- Fix PloneFormGen publish support.
  Recursively publish all items from a FormFolder.
  [mathias.leimgruber]


1.4 (2011-04-06)
----------------

- Cleanup, move to github (https://github.com/4teamwork/ftw.publisher.sender)
  and prepare for release.
  [jone]


1.3 (2011-01-19)
----------------

- Added some german translations and added plain english po-file
  [mathias.leimgruber]

- Merged lock-config-branch into trunk
  Bei Direktem Publishing ohne Queu macht das Locking keinen Sinn.
  Daher kann man nun das Locking einschalten/ausschalten.
  [mathias.leimgruber]

- Added new IBeforeQueueExecutionEvent, which allows third party packages to do dome stuff.
  [jone]


1.2 (2010-09-27)
----------------

- Added missing message factory import in publishploneformgen.py
  [jone]

- Added `QueueExecutedEvent`
  [jone]

- Added viewlet manager on configlet page.
  [jone]

- Do not catch BadStatusLine exceptions since the should be moved
  to the executed jobs list like when regular exceptions occur.
  [jone]

- Added batching to executed jobs view
  [jone]

- Added upgrade step for migrating the executed jobs storage to IOBTree
  [jone]

- Added some storage tests and changed the executed jobs storage to
  a IOBTree storage for better performance.
  [jone]

UPGRADES:

- portal_setup: run the ftw.publisher.sender upgrade step for migrating storage


1.1 (2010-07-21)
----------------

- Use the translated communication state names
  [jone]

- Show json cache path in configuration
  [jone]

- Executed jobs list: made more robust ; reversed listing
  [jone]


1.0c4 (2010-06-24)
------------------

- Fixed bad adapter usage
  [jone]


1.0c3 (2010-06-24)
------------------

- Added string encoding / decoding methods which work with json
  [jone]


1.0c2 (2010-06-22)
------------------

- Fixed fixed namespace_packages in setup.py
  [jone]


1.0c1 (2010-06-18)
------------------

- Locking while executing queue
  [jone]

- Added possiblity to disable automatic publishing in control panel
  [jone]

- Added possibility to execute / delete a single job in the queue
  [jone]

- Added executed jobs list
  [jone]

- Added publisher control panel icon
  [jone]

- Implemented blacklist support
  [jone]

- Added modification date to medata: it will be set by the receiver
  [jone]

- Fixed encoding problem: the dumped data should always contain unicode strings
  [jone]

- Client-Objects are now `IAttributeAnnotable`
  [jone]

- Using z3c.autoinclude for including zcml-dependencies
  [jone]

- implement rename action
  [mle]
